<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>AGROINTELLECT</title>
  <style>
    /* Стили без изменений — можно оставить как есть */
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #d0ebff, #ffffff);
      color: #333;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: start;
      min-height: 100vh;
      margin: 0;
    }
    .calculator-container {
      background-color: #fff;
      border-radius: 15px;
      box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 100%;
      max-width: 700px;
      transition: transform 0.2s ease;
    }
    h2 {
      color: #0077cc;
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.8em;
    }
    .top-parameter-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 15px;
    }
    .top-parameter-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100px;
      padding: 10px;
      border-radius: 10px;
      box-shadow: inset 0px 2px 4px rgba(0, 0, 0, 0.05), 0px 2px 4px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .top-parameter-item:hover {
      transform: scale(1.02);
      box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.15);
    }
    .milk-price-frame { background: linear-gradient(135deg, #cceeff, #a8d8ff); }
    .payback-frame { background: linear-gradient(135deg, #e8faff, #b3f0ff); }
    .herd-size-frame { background: linear-gradient(135deg, #f0f0ff, #d8d8ff); }
    .farm-count-frame { background: linear-gradient(135deg, #ffebe6, #ffd9d9); }
    .top-parameter-item span {
      font-size: 1.2em;
      font-weight: bold;
      color: black;
      background: inherit;
      padding: 5px 10px;
      border-radius: 6px;
      box-shadow: inset 0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 3px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .herd-size-frame select,
    .top-parameter-item input[type="number"] {
      font-size: 0.9em;
      padding: 4px 8px;
      border-radius: 6px;
      border: none;
      outline: none;
      width: 100%;
      max-width: 130px;
      box-sizing: border-box;
      text-align: center;
      background-color: inherit;
      transition: background-color 0.2s;
    }
    .top-parameter-item label {
      font-weight: bold;
      color: #333;
      font-size: 0.9em;
      margin-bottom: 4px;
      text-align: center;
    }
    .module-block {
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 10px;
      box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .agrointellect-block { background: linear-gradient(135deg, #cceeff, #e8faff); }
    .musoft-block { background: linear-gradient(135deg, #e8faff, #f0f0ff); }
    .milk-tracking-block { background: linear-gradient(135deg, #f0f0ff, #ffebe6); }
    .option-group {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 10px;
      background: linear-gradient(135deg, #eef8ff, #ffffff);
      border-radius: 8px;
      margin-bottom: 6px;
      box-shadow: inset 0px 1px 3px rgba(0, 0, 0, 0.05), 0px 1px 3px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .option-group:hover {
      background: linear-gradient(135deg, #cceeff, #e7f3ff);
      box-shadow: inset 0px 2px 4px rgba(0, 0, 0, 0.1), 0px 3px 6px rgba(0, 0, 0, 0.2);
    }
    .option-group label {
      font-weight: bold;
      color: black;
      font-size: 0.9em;
      flex: 1;
    }
    .checkbox-custom {
      width: 20px;
      height: 20px;
      appearance: none;
      background-color: #e0e0e0;
      border-radius: 50%;
      position: relative;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    .checkbox-custom:checked {
      background-color: #25d422;
      transform: scale(1.2);
    }
    .checkbox-custom:checked::before {
      content: '✔';
      font-size: 1em;
      color: white;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    .required::after {
      content: " (обязательно)";
      color: red;
      font-size: 0.8em;
    }
    .input-group.purple-border,
    .discount-group {
      background: linear-gradient(135deg, #cebbff, #e8faff);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 15px;
      box-shadow: inset 0px 1px 3px rgba(0, 0, 0, 0.05);
      transition: box-shadow 0.3s ease;
    }
    .input-group.purple-border:hover,
    .discount-group:hover {
      box-shadow: inset 0px 1px 3px rgba(0, 0, 0, 0.1), 0px 3px 6px rgba(0, 0, 0, 0.2);
    }
    .discount-group {
      background: linear-gradient(135deg, #ffebe6, #ffe1e1);
    }
    #months, #discount {
      width: 60%;
    }
    .monthly-price-frame {
      background: linear-gradient(135deg, #e8faff, #cceeff);
    }
    .total-price-frame {
      background: linear-gradient(135deg, #a8fca8, #d0ffd0);
      color: #1a4d1a;
    }
    .top-parameter-item.total-price-frame span {
      font-size: 1.4em;
      color: #1a4d1a;
    }
  </style>
</head>
<body>
  <div class="calculator-container">
    <h2>AGROINTELLECT</h2>

    <!-- Верхние параметры -->
    <div class="top-parameter-group">
      <div class="top-parameter-item milk-price-frame">
        <label for="milk-price">Стоимость молока:</label>
        <span id="milk-price-display"><input type="number" id="milk-price" value="50" min="0" step="0.01"></span>
      </div>
      <div class="top-parameter-item payback-frame">
        <label>Окупаемость:</label>
        <span id="payback">∞</span> кг
      </div>
      <div class="top-parameter-item herd-size-frame">
        <label for="herd-size">Поголовье:</label>
        <span id="herd-size-display">
          <select id="herd-size">
            <option value="100">100 и менее</option>
            <option value="100-500">100-500</option>
            <option value="500-1000">500-1000</option>
            <option value="1000-1800">1000-1800</option>
            <option value="1800+">1800+</option>
          </select>
        </span>
      </div>
      <div class="top-parameter-item farm-count-frame">
        <label for="farm-count">Фермы:</label>
        <span id="farm-count-display"><input type="number" id="farm-count" value="1" min="1"></span>
      </div>
    </div>

    <!-- Модули AGROINTELLECT -->
    <div class="module-block agrointellect-block">
      <div class="option-group">
        <label>AGROINTELLECT</label>
        <input type="checkbox" id="management-accounting" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label class="required">Веб + ТГ-уведомления</label>
        <input type="checkbox" id="web-tg-notifications" class="checkbox-custom" checked>
      </div>
      <div class="option-group">
        <label>Воспроизводство</label>
        <input type="checkbox" id="reproduction-reports" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label>Кормление</label>
        <input type="checkbox" id="feeding-reports" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label>Лечение</label>
        <input type="checkbox" id="hoof-treatment-reports" class="checkbox-custom">
      </div>
    </div>

    <!-- Модули MUSOFT -->
    <div class="module-block musoft-block">
      <div class="option-group">
        <label>MUSOFT</label>
        <input type="checkbox" id="herd-management" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label class="required">Учет поголовья</label>
        <input type="checkbox" id="cattle-management" class="checkbox-custom" checked>
      </div>
      <div class="option-group">
        <label>Зоотехния</label>
        <input type="checkbox" id="reproduction" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label>Ветеринария</label>
        <input type="checkbox" id="treatment" class="checkbox-custom">
      </div>
      <div class="option-group">
        <label>Интеграция с оборудованием</label>
        <input type="checkbox" id="milking-integration" class="checkbox-custom">
      </div>
    </div>

    <!-- Учет молока -->
    <div class="module-block milk-tracking-block">
      <div class="option-group">
        <label>Учет молока</label>
        <input type="checkbox" id="milk-tracking" class="checkbox-custom">
      </div>
    </div>

    <!-- Месяцы -->
    <div class="input-group purple-border">
      <label for="months">Месяцы:</label>
      <input type="range" id="months" min="1" max="24" step="1" value="1">
      <span id="month-label">1 месяц</span>
    </div>

    <!-- Скидка (%) -->
    <div class="discount-group">
      <label for="discount">Скидка:</label>
      <input type="range" id="discount" min="0" max="100" step="1" value="0">
      <span id="discount-label">0%</span>
    </div>

    <!-- Итоговые параметры -->
    <div class="top-parameter-group">
      <div class="top-parameter-item monthly-price-frame">
        <label>Цена за месяц:</label>
        <span id="monthly-price">0</span> руб.
      </div>
      <div class="top-parameter-item total-price-frame">
        <label>Итоговая цена:</label>
        <span id="total-price">0</span> руб.
      </div>
    </div>
  </div>

  <script>
    const prices = {
      "100": { "milk": 500, "herd": 5000, "cattle": 2000, "reproduction": 1500, "treatment": 1500, "integration": 0, "management": 6000, "webTG": 4000, "reproductionReports": 1000, "feedingReports": 500, "hoofTreatment": 500 },
      "100-500": { "milk": 1000, "herd": 12000, "cattle": 4000, "reproduction": 2500, "treatment": 2500, "integration": 3000, "management": 12000, "webTG": 7000, "reproductionReports": 2000, "feedingReports": 1500, "hoofTreatment": 1500 },
      "500-1000": { "milk": 1500, "herd": 18000, "cattle": 6000, "reproduction": 4500, "treatment": 4500, "integration": 3000, "management": 19000, "webTG": 10000, "reproductionReports": 4000, "feedingReports": 3000, "hoofTreatment": 2000 },
      "1000-1800": { "milk": 2000, "herd": 24000, "cattle": 8000, "reproduction": 6500, "treatment": 6500, "integration": 3000, "management": 26000, "webTG": 13000, "reproductionReports": 6000, "feedingReports": 4000, "hoofTreatment": 3000 },
      "1800+": { "milk": 2500, "herd": 30000, "cattle": 10000, "reproduction": 8500, "treatment": 8500, "integration": 3000, "management": 32000, "webTG": 16000, "reproductionReports": 8000, "feedingReports": 5000, "hoofTreatment": 3000 }
    };

    function calculateTotal() {
      const herdSize = document.getElementById("herd-size").value;
      const farmCount = parseInt(document.getElementById("farm-count").value) || 1;
      const months = parseInt(document.getElementById("months").value);
      const discount = parseFloat(document.getElementById("discount").value) / 100;
      const milkPrice = parseFloat(document.getElementById("milk-price").value) || 0;

      let totalPrice = 0;
      if (document.getElementById("milk-tracking").checked) totalPrice += prices[herdSize].milk;
      if (document.getElementById("herd-management").checked) totalPrice += prices[herdSize].herd;
      if (document.getElementById("cattle-management").checked) totalPrice += prices[herdSize].cattle;
      if (document.getElementById("reproduction").checked) totalPrice += prices[herdSize].reproduction;
      if (document.getElementById("treatment").checked) totalPrice += prices[herdSize].treatment;
      if (document.getElementById("milking-integration").checked) totalPrice += prices[herdSize].integration;
      if (document.getElementById("management-accounting").checked) totalPrice += prices[herdSize].management;
      if (document.getElementById("web-tg-notifications").checked) totalPrice += prices[herdSize].webTG;
      if (document.getElementById("reproduction-reports").checked) totalPrice += prices[herdSize].reproductionReports;
      if (document.getElementById("feeding-reports").checked) totalPrice += prices[herdSize].feedingReports;
      if (document.getElementById("hoof-treatment-reports").checked) totalPrice += prices[herdSize].hoofTreatment;

      const discountedPrice = totalPrice * farmCount * months * (1 - discount);
      const payback = milkPrice > 0 ? (discountedPrice / milkPrice).toFixed(2) : '∞';

      document.getElementById("payback").innerText = `${payback}`;
      document.getElementById("total-price").innerText = discountedPrice.toLocaleString();
      document.getElementById("monthly-price").innerText = (months > 0 ? (discountedPrice / months).toLocaleString() : "0");
      document.getElementById("discount-label").innerText = `${Math.round(discount * 100)}%`;
    }

    function updateMonthLabel() {
      const months = document.getElementById("months").value;
      document.getElementById("month-label").textContent = months + ' ' + (months == 1 ? 'месяц' : 'месяцев');
    }

    // Привязываем события ко всем элементам
    const allInputs = document.querySelectorAll('input[type="checkbox"], input[type="number"], input[type="range"], select');
    allInputs.forEach(input => {
      input.addEventListener('input', calculateTotal);
      input.addEventListener('change', calculateTotal); // Дополнительно добавляем change для mobile
    });

    calculateTotal(); // Запуск первоначального расчета
  </script>
</body>
</html>